<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚Šã‚“ã”ğŸ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }

    #container {
      background: white;
      margin-top: 2em;
      padding: 2em;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      width: 90%;
      max-width: 500px;
      box-sizing: border-box;
      text-align: center;
    }

    h1 {
      margin-bottom: 0.2em;
      color: #333;
    }

    #score {
      margin-bottom: 1em;
      color: #555;
    }

    select, button {
      font-size: 1em;
      padding: 0.5em 1em;
      margin: 1em 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }

    select:hover, button:hover {
      background: #e0f0ff;
      border-color: #80bfff;
    }

    #question {
      margin: 1em 0;
      font-size: 1.1em;
    }

    .choice {
      display: block;
      margin: 0.5em 0;
      padding: 0.6em 1em;
      background: #f9fafb;
      border: 1px solid #ccc;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
      width: 100%;
      box-sizing: border-box;
    }

    .choice:hover {
      background: #e8f4ff;
    }

    .correct {
      background: #d4edda !important;
      border-color: #28a745;
    }

    .incorrect {
      background: #f8d7da !important;
      border-color: #dc3545;
    }

    #next-btn {
      display: none;
      margin-top: 1em;
    }
    button.selected-mode {
      background-color: #007bff;
      color: white;
      border-color: #007bff;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>è‹±èªè¡¨ç¾4æŠã‚¯ã‚¤ã‚º</h1>

    <!-- âœ… ãƒ¢ãƒ¼ãƒ‰é¸æŠãƒœã‚¿ãƒ³ -->
    <div>
      <button id="commuBtn">è‹±ã‚³ãƒŸãƒ¥</button>
      <button id="ronpyouBtn">è«–è¡¨</button>
    </div>

    <label for="mode">å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ï¼š</label>
    <select id="mode">
      <option value="en-ja">è‹±èª â†’ æ—¥æœ¬èª</option>
      <option value="ja-en">æ—¥æœ¬èª â†’ è‹±èª</option>
      <option value="random">ãƒ©ãƒ³ãƒ€ãƒ </option>
    </select>

    <div id="question">èª­ã¿è¾¼ã¿ä¸­...</div>
    <div id="choices"></div>
    <button id="next-btn">æ¬¡ã®å•é¡Œ â–¶</button>
    <div id="score">æ­£è§£æ•°: 0 / 0</div>
  </div>

  <script>
    // âœ… ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆè«–è¡¨ï¼‰
    const data_ronpyou = [
      ["â€¦ã™ã‚‹ãŸã‚ã«", "in order to [do]"],
      ["â€¦ã™ã‚‹ãŸã‚ã«ï¼ˆã‚„ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒ«ï¼‰", "so as to [do]"],
      ["(çµå±€)â€¦ã—ãŸ", "only to [do]"],
      ["ç‡ç›´ã«è¨€ã£ã¦", "to be frank (with you)"],
      ["æ­£ç›´ã«è¨€ã£ã¦", "to be honest"],
      ["ã¾ãšæœ€åˆã«", "to begin with"],
      ["ã•ã‚‰ã«æ‚ªã„ã“ã¨ã«", "to make matters worse"],
      ["ä¸æ€è­°ãªã“ã¨ã«", "strange to say"],
      ["â€¦ã¯è¨€ã†ã¾ã§ã‚‚ãªã", "not to mention"],
      ["ã„ã‚ã°", "so to speak"],
      ["â€¦ã™ã‚‹ã®ã«ååˆ†ã€œ", "enough to do"],
      ["(äººãŒ)â€¦ã™ã‚‹ã®ã«(æ™‚é–“ãŒ)ã‹ã‹ã‚‹", "It takes (äºº) [æ™‚é–“] to do"],
      ["(äººãŒ)â€¦ã™ã‚‹ã®ã«(è²»ç”¨ãŒ)ã‹ã‹ã‚‹", "It costs (äºº) [è²»ç”¨] to do"]
    ];

    // âœ… ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆè‹±ã‚³ãƒŸãƒ¥ï¼‰
    const data_commu = [
  ["æ™‚ä»£", "era"],
  ["ä¸»å¼µã™ã‚‹", "argue"],
  ["ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ³ã€ç¥çµŒç´°èƒ", "neuron"],
  ["ã‚·ãƒŠãƒ—ã‚¹", "synapse"],
  ["é »ç¹ãª", "frequent"],
  ["ä¿¡å·ã€åˆå›³", "signal"],
  ["æ˜ã‚‰ã‹ã«ã™ã‚‹", "reveal"],
  ["çµ¶ãˆãš", "constantly"],
  ["é‚ªé­”ã‚’ã™ã‚‹ã€ä¸­æ–­ã™ã‚‹", "interrupt"],
  ["æ¢ã—æ±‚ã‚ã‚‹", "seek"],
  ["æ¬²æœ›,é¡˜æœ›", "desire"],
  ["å—å‹•çš„ãª", "passive"],
  ["å‚¾å‘ãŒã‚ã‚‹", "tend"],
  ["å¿ƒç†å­¦", "psychology"],
  ["å‚åŠ è€…", "participant"],
  ["å‰Šé™¤ã™ã‚‹", "delete"],
  ["é©å¿œã™ã‚‹", "adapt"],
  ["å¤–éƒ¨ã®", "external"],
  ["æœãŸã™", "fulfill"],
  ["å¼·èª¿ã€é‡è¦–", "emphasis"],
  ["åˆ©ç”¨å¯èƒ½ãªã€æ‰‹ã«å…¥ã‚‹", "available"],
  ["å·»ãè¾¼ã‚€ã€ã‚’é–¢ä¸ã•ã›ã‚‹ã€ã‚’ä¼´ã†", "involve"],
  ["æ„å‘³ã®ã‚ã‚‹", "meaningful"],
  ["ï½ã«é–¢ã—ã¦ã¯ã€ï½ã®ã“ã¨ã«ãªã‚‹ã¨", "when it comes to"],
  ["ã¤ã¾ã‚Šã€è¦ã™ã‚‹ã«", "in short"],
  ["å¦¨ã’ã‚‹", "interfere with"],
  ["åˆ¶å¾¡ã§ããªã„", "out of control"],
  ["ï½ã™ã‚‹åŠªåŠ›ã‚’ã™ã‚‹", "make an effort to do"],
  ["ç¥çµŒä¼é”ç‰©è³ª", "neurotransmitter"]
]
;

    let currentDataset = data_ronpyou;

    const questionDiv = document.getElementById("question");
    const choicesDiv = document.getElementById("choices");
    const nextBtn = document.getElementById("next-btn");
    const modeSelect = document.getElementById("mode");
    const scoreDisplay = document.getElementById("score");
    const commuBtn = document.getElementById("commuBtn");
    const ronpyouBtn = document.getElementById("ronpyouBtn");

    let currentAnswer = "";
    let total = 0;
    let correct = 0;
    let choiceButtons = [];

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function updateScore() {
      scoreDisplay.textContent = `æ­£è§£æ•°: ${correct} / ${total}`;
    }

    function showQuestion() {
      nextBtn.style.display = "none";
      choicesDiv.innerHTML = "";
      choiceButtons = [];

      const pair = currentDataset[Math.floor(Math.random() * currentDataset.length)];
      const ja = pair[0];
      const en = pair[1];
      let isJaToEn;

      switch (modeSelect.value) {
        case "ja-en":
          isJaToEn = true;
          break;
        case "en-ja":
          isJaToEn = false;
          break;
        default:
          isJaToEn = Math.random() < 0.5;
      }

      const questionText = isJaToEn ? `"${ja}" ã¯è‹±èªã§ï¼Ÿ` : `"${en}" ã¯æ—¥æœ¬èªã§ï¼Ÿ`;
      questionDiv.textContent = questionText;
      currentAnswer = isJaToEn ? en : ja;

      const allChoices = [currentAnswer];
      while (allChoices.length < 4) {
        const randPair = currentDataset[Math.floor(Math.random() * currentDataset.length)];
        const choice = isJaToEn ? randPair[1] : randPair[0];
        if (!allChoices.includes(choice)) allChoices.push(choice);
      }

      shuffle(allChoices).forEach((choice, index) => {
        const btn = document.createElement("button");
        btn.textContent = choice;
        btn.className = "choice";
        btn.dataset.index = index + 1;
        btn.onclick = () => {
          if (btn.disabled) return;
          total++;
          if (choice === currentAnswer) {
            btn.classList.add("correct");
            correct++;
          } else {
            btn.classList.add("incorrect");
            choiceButtons.forEach(b => {
              if (b.textContent === currentAnswer) b.classList.add("correct");
            });
          }
          updateScore();
          choiceButtons.forEach(b => b.disabled = true);
          nextBtn.style.display = "inline-block";
        };
        choicesDiv.appendChild(btn);
        choiceButtons.push(btn);
      });
    }

    nextBtn.onclick = showQuestion;
    modeSelect.onchange = showQuestion;

    document.addEventListener("keydown", e => {
      if (e.key >= '1' && e.key <= '4') {
        const idx = parseInt(e.key, 10) - 1;
        if (choiceButtons[idx]) choiceButtons[idx].click();
      } else if (e.key === "Enter") {
        if (nextBtn.style.display !== "none") nextBtn.click();
      } else if (e.key === "Escape") {
        location.reload();
      }
    });

// é¸æŠä¸­ãƒœã‚¿ãƒ³ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
function setModeButtonSelected(selectedBtn) {
  commuBtn.classList.remove("selected-mode");
  ronpyouBtn.classList.remove("selected-mode");
  selectedBtn.classList.add("selected-mode");
}

commuBtn.onclick = () => {
  currentDataset = data_commu;
  correct = 0;
  total = 0;
  updateScore();
  showQuestion();
  setModeButtonSelected(commuBtn); // â† è¿½åŠ 
};

ronpyouBtn.onclick = () => {
  currentDataset = data_ronpyou;
  correct = 0;
  total = 0;
  updateScore();
  showQuestion();
  setModeButtonSelected(ronpyouBtn); // â† è¿½åŠ 
};


    window.onload = () => {
      updateScore();
      showQuestion();
      setModeButtonSelected(ronpyouBtn); // â† åˆæœŸãƒ‡ãƒ¼ã‚¿ãŒè«–è¡¨ãªã®ã§
    };
  </script>
</body>
